# 実装計画 - 2カラムレイアウトでの水平線の幅修正

この計画では、`twoColumn` レイアウトが有効な場合でも、水平線がコンテナの全幅に広がるようにするための変更の概要を説明します。

## 提案される変更

### [レイアウトプラグイン]
#### [変更] [layout.mjs](file:///Users/ofuchirin/code/lantern-tech-blog/astroprojects/src/plugins/layout.mjs)
- `rehypeContentGrouping` 関数を変更します。
- `hr` タグに対する特定の処理を追加します。
- `hr` が検出された場合:
    - 現在のセクションを `newChildren` にプッシュします（現在の2カラムブロックを終了します）。
    - `hr` ノードを直接 `newChildren` にプッシュします（`.content-section` の兄弟となり、全幅に広がります）。
    - 新しいセクションを開始します（後続のコンテンツが新しい2カラムブロックを開始します）。

### [キャッシュのトラブルシューティング]
- Astroのコンテンツコレクションキャッシュにより、プラグインの変更が即座に反映されない場合がありました。
- 修正が反映されない場合は、`rm -rf dist .astro` を実行してキャッシュをクリアし、サーバーを再起動してください。

## 検証計画

### 手動検証
1.  開発サーバーを起動します (`npm run dev`)。
2.  `twoColumn: true` のブログ記事（例: `/jp/blog/integrate` または `/jp/blog/character`）に移動します。
3.  `---` がコンテンツ領域の全幅に広がる水平線としてレンダリングされ、一時的に2カラムレイアウトを解除することを確認します。
