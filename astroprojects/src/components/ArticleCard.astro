---
import { Image } from "astro:assets";
import Imgur from "./Imgur.astro";

interface Props {
    title: string;
    description: string;
    author: string;
    slug: string;
    ogImage?: string;
    lang: string;
    collection: "blog" | "newsrelease" | "notes";
}

const { title, description, author, slug, ogImage, lang, collection } =
    Astro.props;

const href = `/${lang}/${collection}/${slug}`;
---

<article class="article-card">
    <a href={href} class="thumbnail-link">
        {
            ogImage ? (
                <div class="thumbnail-wrapper">
                    <Imgur id={ogImage} alt={title} width={400} height={225} />
                </div>
            ) : (
                <div class="thumbnail-placeholder">
                    <span>No Image</span>
                </div>
            )
        }
    </a>
    <div class="content">
        <h2 class="title">
            <a href={href}>{title}</a>
        </h2>
        <p class="description">{description}</p>
        <div class="meta">
            <span class="author">By {author}</span>
        </div>
    </div>
</article>

<style>
    .article-card {
        display: flex;
        flex-direction: column;
        background: var(--color-background); /* Assuming CSS variables exist */
        border: 1px solid #eee;
        border-radius: 8px;
        overflow: hidden;
        transition:
            transform 0.2s ease-in-out,
            box-shadow 0.2s ease-in-out;
    }

    .article-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .thumbnail-link {
        display: block;
        aspect-ratio: 16 / 9;
        overflow: hidden;
        background-color: #f5f5f5;
    }

    .thumbnail-wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* Target the Imgur component's container and image */
    .thumbnail-wrapper :global(.imgur-container) {
        margin: 0;
        width: 100%;
        height: 100%;
    }

    .thumbnail-wrapper :global(img) {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 0; /* Override Imgur component border radius */
    }

    .thumbnail-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #999;
        background: #eee;
    }

    .content {
        padding: 1.5rem;
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .title {
        margin: 0 0 0.5rem 0;
        font-size: 1.25rem;
        line-height: 1.4;
    }

    .title a {
        text-decoration: none;
        color: inherit;
    }

    .title a:hover {
        color: var(--color-primary); /* Assuming CSS variables exist */
    }

    .description {
        font-size: 0.95rem;
        color: #666;
        margin-bottom: 1rem;
        flex: 1; /* Pushes meta to bottom */
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .meta {
        font-size: 0.85rem;
        color: #888;
        border-top: 1px solid #eee;
        padding-top: 0.75rem;
    }
</style>
